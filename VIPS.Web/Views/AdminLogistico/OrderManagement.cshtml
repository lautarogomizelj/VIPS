@model List<OrderViewModel>


    @{
    Layout = "_AdminLogisticoLayout";
    string lang = User.FindFirst("Lang")?.Value ?? "es";
    }

    <div class="filtrosContenedor">

        <form method="get" asp-controller="AdminLogistico" asp-action="OrderManagement" class="FILTER">

            <div class="contenedor-info">
                <label for="columna"><h4>@(lang == "es" ? "Columna:" : "Column:")</h4></label>

                <select id="columna" name="columna">
                    <option value="idPedido" selected="@(ViewBag.Columna == "id" ? "selected" : null)">
                        @(lang == "es" ? "ID Pedido" : "Order ID")
                    </option>
                    <option value="nombreCliente" selected="@(ViewBag.Columna == "nombre" ? "selected" : null)">
                        @(lang == "es" ? "Nombre cliente" : "Client Name")
                    </option>
                    <option value="peso" selected="@(ViewBag.Columna == "apellido" ? "selected" : null)">
                        @(lang == "es" ? "Peso" : "Weight")
                    </option>
                    <option value="fechaCreacion" selected="@(ViewBag.Columna == "fechaCreacion" ? "selected" : null)">
                        @(lang == "es" ? "Fecha Creacion" : "Date creation")
                    </option>
                    <option value="fechaDespacho" selected="@(ViewBag.Columna == "domicilioLegal" ? "selected" : null)">
                        @(lang == "es" ? "Fecha Despacho" : "Delivery date")
                    </option>
                    <option value="estadoPedido" selected="@(ViewBag.Columna == "domicilioLegal" ? "selected" : null)">
                        @(lang == "es" ? "Estado" : "State")
                    </option>
                    <option value="direccion" selected="@(ViewBag.Columna == "domicilioLegal" ? "selected" : null)">
                        @(lang == "es" ? "Direccion" : "Adress")
                    </option>
                </select>

                <label for="orden"><h4>@(lang == "es" ? "Orden:" : "Order:")</h4></label>
                <select id="orden" name="orden">
                    <option value="asc" selected="@(ViewBag.Orden == "asc" ? "selected" : null)">
                        @(lang == "es" ? "Ascendente" : "Ascending")
                    </option>
                    <option value="desc" selected="@(ViewBag.Orden == "desc" ? "selected" : null)">
                        @(lang == "es" ? "Descendente" : "Descending")
                    </option>
                </select>
            </div>


            <div class="contenedor-info">
                <label for="nombreCliente"><h4>@(lang == "es" ? "Nombre cliente:" : "Client name:")</h4></label>
                <input type="text" id="IdPnombreClienteedido" name="nombreCliente" class="form-control" value="@ViewBag.NombreCliente" />
            </div>

            <div class="contenedor-info">
                <button class="btn-principal filtros" type="submit">@(lang == "es" ? "Aplicar filtros" : "Apply Filters")</button>
            </div>

        </form>

        

        

        <a asp-controller="AdminLogistico" asp-action="ExportarPedidosPdf" asp-route-columna="@ViewBag.Columna" asp-route-orden="@ViewBag.Orden" asp-route-nombreCliente="@ViewBag.NombreCliente" class="btn-principal filtros">
            @(lang == "es" ? "Exportar a pdf" : "Export to PDF")
        </a>
    </div>


    <table>
        <thead>

            <tr>
                <th>@(lang == "es" ? "Id pedido" : "Order ID")</th>
                <th>@(lang == "es" ? "Nombre cliente" : "Client name")</th>
                <th>@(lang == "es" ? "Peso (gr)" : "Weight (gr)")</th>
                <th>@(lang == "es" ? "Fecha creacion" : "Creation Date")</th>
                <th>@(lang == "es" ? "Fecha despacho" : "Delivery Date")</th>
                <th>@(lang == "es" ? "Estado" : "Status")</th>
                <th>@(lang == "es" ? "Direccion" : "Adress")</th>

            </tr>
        </thead>

        <tbody>


            @foreach (var pedido in Model)
            {
                        <tr>
                            <td>@pedido.IdPedido</td>
                            <td>@pedido.NombreCliente</td>
                            <td>@pedido.Peso</td>
                            <td>@pedido.FechaCreacion</td>
                            <td>@(pedido.FechaDespacho?.ToString("dd/MM/yyyy") ?? "-")</td>

                            <td>@pedido.EstadoPedido</td>
                            <td>@pedido.Direccion</td>
                        </tr>
            }
        </tbody>

    </table>
