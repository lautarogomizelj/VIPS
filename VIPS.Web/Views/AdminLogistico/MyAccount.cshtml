@{
    Layout = "_AdminLogisticoLayout";
    string lang = User.FindFirst("Lang")?.Value ?? "es";
}

<h2 class="page-title">
    ⚙️ @(lang == "es" ? "Administrar mi cuenta" : "Manage My Account")
</h2>

<div class="settings-grid">
    <!-- Card de Seguridad -->
    <div class="settings-card">
        <h3 class="card-title">
            🔒 @(lang == "es" ? "Seguridad" : "Security")
        </h3>
        <p class="card-description">
            @(lang == "es" ? "Gestiona la seguridad de tu cuenta cambiando tu contraseña cuando sea necesario." : "Manage your account security by changing your password when needed.")
        </p>

        <a class="btn-principal" asp-controller="Auth" asp-action="ChangePasswordAccount">
            🔑 @(lang == "es" ? "Cambiar Contraseña" : "Change Password")
        </a>

        <!-- Mensajes de contraseña -->

        @if (TempData["ErrorMessageChange"] != null)
        {
        <div class="alert alert-danger">
            <p style="color:red;">❌ @TempData["ErrorMessageChange"]</p>
        </div>

        }

        @if (TempData["SuccessMessageChange"] != null)
        {
        <div class="alert alert-success">
            <p style="color:green;">✅ @TempData["SuccessMessageChange"]</p>
        </div>
        }

    </div>

    <!-- Card de Idioma -->
    <div class="settings-card">
        <h3 class="card-title">
            🌐 @(lang == "es" ? "Preferencias de Idioma" : "Language Preferences")
        </h3>
        <p class="card-description">
            @(lang == "es" ? "Selecciona el idioma de la interfaz que prefieras para una mejor experiencia de usuario." : "Select your preferred interface language for a better user experience.")
        </p>

        <div class="current-language">
            🗣️ @(lang == "es" ? "Idioma actual" : "Current language"): <strong>@(lang == "es" ? "Español" : "English")</strong>
        </div>

        <form asp-controller="AdminLogistico" asp-action="CambiarIdioma" method="post">
            @Html.AntiForgeryToken()

            <div class="form-group">
                <label for="nuevoLang" class="form-label">
                    @(lang == "es" ? "Seleccionar nuevo idioma" : "Select new language")
                </label>

                <select id="nuevoLang" name="nuevoLang" class="form-select" required>
                    @if(lang == "es")
                    {
                    <option value="es" selected>Español</option>
                    <option value="en">Inglés</option>
                    }
                    else
                    {
                    <option value="es">Spanish</option>
                    <option value="en" selected>English</option>
                    }
                </select>
            </div>

            <button type="submit" class="btn-secondary">
                🔄 @(lang == "es" ? "Cambiar idioma" : "Change Language")
            </button>

            <!-- Mensajes de idioma -->

            @if (TempData["SuccessMessageChangeLanguage"] != null)
            {
            <div class="alert alert-success">
                <p style="color:green;">✅ @TempData["SuccessMessageChangeLanguage"]</p>
            </div>

            }

            @if (TempData["ErrorMessageChangeLanguage"] != null)
            {
            <div class="alert alert-danger">
                <p style="color:red;">❌ @TempData["ErrorMessageChangeLanguage"]</p>
            </div>
            }

        </form>
    </div>

    <!-- Card de Punto de Partida -->
    <div class="settings-card">
        <h3 class="card-title">
            🚛 @(lang == "es" ? "Punto de Partida de Camiones" : "Truck Departure Point")
        </h3>
        <p class="card-description">
            @(lang == "es" ? "Define la dirección de origen desde donde partirán los camiones para optimizar las rutas de entrega." : "Define the origin address from where trucks will depart to optimize delivery routes.")
        </p>
        <div class="current-language">
            📍 @(lang == "es" ? "Dirección actual" : "Current address"): <strong>@(ViewBag.PuntoPartidaActual ?? (lang == "es" ? "No definida" : "Not defined"))</strong>
        </div>
        <form asp-controller="AdminLogistico" asp-action="GuardarPuntoPartida" method="post">
            @Html.AntiForgeryToken()
            <div class="form-group">
                <label for="DomicilioPartida" class="form-label">
                    @(lang == "es" ? "Dirección de partida" : "Departure address")
                </label>
                <input type="text"
                       id="DomicilioPartida"
                       name="DomicilioPartida"
                       class="form-select"
                       placeholder="@(lang == "es" ? "Ej: Luis Maria Campos 1149" : "Ex: 123 Main St")"
                       required>
            </div>
            <div class="form-group">
                <label for="CiudadPartida" class="form-label">
                    @(lang == "es" ? "Ciudad" : "City")
                </label>
                <input type="text"
                       id="CiudadPartida"
                       name="CiudadPartida"
                       class="form-select"
                       placeholder="@(lang == "es" ? "Ej: Buenos Aires" : "Ex: New York")"
                       required>
            </div>
            <div class="form-group">
                <label for="ProvinciaPartida" class="form-label">
                    @(lang == "es" ? "Provincia" : "Province/State")
                </label>
                <input type="text"
                       id="ProvinciaPartida"
                       name="ProvinciaPartida"
                       class="form-select"
                       placeholder="@(lang == "es" ? "Ej: Buenos Aires" : "Ex: New York")"
                       required>
            </div>
            <button type="submit" class="btn-secondary">
                💾 @(lang == "es" ? "Guardar Punto de Partida" : "Save Departure Point")
            </button>
            <!-- Mensajes de punto de partida -->
            @if (TempData["SuccessMessageDeparturePoint"] != null)
        {
            <div class="alert alert-success">
                <p style="color:green;">✅ @TempData["SuccessMessageDeparturePoint"]</p>
            </div>
        }
            @if (TempData["ErrorMessageDeparturePoint"] != null)
        {
            <div class="alert alert-danger">
                <p style="color:red;">❌ @TempData["ErrorMessageDeparturePoint"]</p>
            </div>
        }
        </form>
    </div>

</div>