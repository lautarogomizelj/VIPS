@model List<VIPS.Web.Models.RouteViewModel>

    @{
    Layout = "_AdminLogisticoLayout";
    string lang = User.FindFirst("Lang")?.Value ?? "es";
    }

    <div class="filtrosContenedor">

        <form method="get" asp-controller="AdminLogistico" asp-action="RouteManagement" class="FILTER">

            <div class="group">
                <label for="columna"><h4>@(lang == "es" ? "Columna:" : "Column:")</h4></label>

                <select id="columna" name="columna">
                    <option value="idRuta" selected="@(ViewBag.Columna == "idRuta" ? "selected" : null)">
                        @(lang == "es" ? "ID Ruta" : "Route ID")
                    </option>

                    <option value="patente" selected="@(ViewBag.Columna == "patente" ? "selected" : null)">
                        @(lang == "es" ? "Patente" : "License Plate")
                    </option>

                    <option value="r.fechaCreacion" selected="@(ViewBag.Columna == "fechaCreacion" ? "selected" : null)">
                        @(lang == "es" ? "Fecha Creación" : "Creation Date")
                    </option>


                    <option value="cantidadPedidos" selected="@(ViewBag.Columna == "cantidadPedidos" ? "selected" : null)">
                        @(lang == "es" ?  "Cant. Pedidos" : "Order Quantity")
                    </option>

                    <option value="estado" selected="@(ViewBag.Columna == "estado" ? "selected" : null)">
                        @(lang == "es" ? "Estado" : "Status")
                    </option>
                </select>

            </div>

            <div class="group">


                <label for="orden"><h4>@(lang == "es" ? "Orden:" : "Order:")</h4></label>
                <select id="orden" name="orden">
                    <option value="asc" selected="@(ViewBag.Orden == "asc" ? "selected" : null)">
                        @(lang == "es" ? "Ascendente" : "Ascending")
                    </option>
                    <option value="desc" selected="@(ViewBag.Orden == "desc" ? "selected" : null)">
                        @(lang == "es" ? "Descendente" : "Descending")
                    </option>
                </select>
            </div>



            <div class="group-btn">
                <button class="btn filtros" type="submit">@(lang == "es" ? "🔍 Aplicar filtros" : "🔍 Apply Filters")</button>


                <a asp-controller="AdminLogistico" asp-action="GenerateRoutes" class="btn agregar">
                    @(lang == "es" ? "📍 Generar rutas" : "📍 Generate routes ")
                </a>

                <a class="btn exportar" asp-controller="AdminLogistico" asp-action="ExportarRutasPdf" asp-route-columna="@ViewBag.Columna" asp-route-orden="@ViewBag.Orden" asp-route-IdRuta="@ViewBag.IdRuta">
                    @(lang == "es" ? "📄 Exportar a pdf" : "📄 Export to PDF")
                </a>
            </div>
        </form>
    </div>

    <table>
        <thead>

            <tr>
                <th>@(lang == "es" ? "ID Ruta" : "Route ID")</th>
                <th>@(lang == "es" ? "Patente" : "License Plate")</th>
                <th>@(lang == "es" ? "Fecha Creación" : "Creation Date")</th>
                <th>@(lang == "es" ? "Cant. Pedidos" : "Order Quantity")</th>
                <th>@(lang == "es" ? "Estado" : "Status")</th>
                <th>@(lang == "es" ? "Acciones" : "Actions")</th>
            </tr>
        </thead>

        <tbody>


            @foreach (var ruta in Model)
    {
            <tr>
                <td> <span class="id-badge">@ruta.IdRuta</span></td>
                <td> <span class="patent-code">@ruta.Patente</span></td>
                <td> <span class="date-value">@ruta.FechaCreacion.ToString("dd/MM/yyyy")</span></td>
                <td> <span class="numeric-value">@ruta.CantPedidos</span></td>

                <td>
                    <span class="route-status @(
    ruta.Estado== "Pendiente" ? "status-pending" :
    ruta.Estado== "En camino" ? "status-en-camino" :
    ruta.Estado== "Finalizada" ? "status-finalizada" :
    ruta.Estado== "Cancelada" ? "status-cancelada" :
    ruta.Estado== "Sin Asignar" ? "status-entregado" : "status-sin-asignar")">
                        @ruta.Estado
                    </span>
                </td>

                <td>

                    <div class="actions-cell">

                        <a asp-controller="AdminLogistico" asp-action="ShowRoute" asp-route-idRuta="@ruta.IdRuta" class="action-btn show-btn">
                            👁️
                        </a>

                        <a asp-controller="AdminLogistico" asp-action="EditRoute" asp-route-idRuta="@ruta.IdRuta" class="action-btn edit-btn">
                            ✏️
                        </a>

                        <a asp-controller="AdminLogistico" asp-action="DeleteRoute" asp-route-idRuta="@ruta.IdRuta" class="action-btn delete-btn">
                            🗑️
                        </a>

                    </div>


                </td>
            </tr>
    }
        </tbody>

    </table>
