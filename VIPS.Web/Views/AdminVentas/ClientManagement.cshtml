@model List<ClienteViewModel>

@{
    Layout = "_AdminVentasLayout";
    string lang = User.FindFirst("Lang")?.Value ?? "es";
}


<div class="filtrosContenedor">

    <form method="get" asp-controller="AdminVentas" asp-action="ClientManagement" class="FILTER">

        <div class="group">
            <label for="columna"><h4>@(lang == "es" ? "Columna:" : "Column:")</h4></label>

            <select id="columna" name="columna">
                <option value="idCliente" selected="@(ViewBag.Columna == "id" ? "selected" : null)">
                    @(lang == "es" ? "ID" : "ID")
                </option>
                <option value="nombre" selected="@(ViewBag.Columna == "nombre" ? "selected" : null)">
                    @(lang == "es" ? "Nombre" : "Name")
                </option>
                <option value="apellido" selected="@(ViewBag.Columna == "apellido" ? "selected" : null)">
                    @(lang == "es" ? "Apellido" : "Last name")
                </option>
                <option value="domicilioLegal" selected="@(ViewBag.Columna == "domicilioLegal" ? "selected" : null)">
                    @(lang == "es" ? "Domicilio" : "Adress")
                </option>
                <option value="fechaCreacion" selected="@(ViewBag.Columna == "fechaCreacion" ? "selected" : null)">
                    @(lang == "es" ? "FechaCreacion" : "Date creation")
                </option>
            </select>

        </div>


        <div class="group">

            <label for="orden"><h4>@(lang == "es" ? "Orden:" : "Order:")</h4></label>
            <select id="orden" name="orden">
                <option value="asc" selected="@(ViewBag.Orden == "asc" ? "selected" : null)">
                    @(lang == "es" ? "Ascendente" : "Ascending")
                </option>
                <option value="desc" selected="@(ViewBag.Orden == "desc" ? "selected" : null)">
                    @(lang == "es" ? "Descendente" : "Descending")
                </option>
            </select>
        </div>


        <div class="group">
            <label for="nombreCliente"><h4>@(lang == "es" ? "Nombre cliente:" : "Client name:")</h4></label>
            <input type="text" id="nombreCliente" name="nombreCliente" class="form-control" value="@ViewBag.NombreCliente" />
        </div>



        <div class="group-btn">
            <button class="btn filtros" type="submit">@(lang == "es" ? "🔍 Aplicar filtros" : "🔍 Apply Filters")</button>


            <a asp-controller="AdminVentas" asp-action="CreateClient" class="btn agregar">
                @(lang == "es" ? "➕ Agregar cliente" : "➕ Add client")
            </a>

            <a asp-controller="AdminVentas" asp-action="ExportarClientesPdf" asp-route-columna="@ViewBag.Columna" asp-route-orden="@ViewBag.Orden" asp-route-nombreCliente="@ViewBag.NombreCliente" class="btn exportar">
                @(lang == "es" ? "📄 Exportar a pdf" : "📄 Export to PDF")
            </a>
        </div>

    </form>

    
</div>

<table>
    <thead>

        <tr>
            <th>@(lang == "es" ? "Id" : "Id")</th>
            <th>@(lang == "es" ? "Nombre" : "Name")</th>
            <th>@(lang == "es" ? "Apellido" : "Last name")</th>
            <th>@(lang == "es" ? "Domicilio" : "Adress")</th>
            <th>@(lang == "es" ? "Fecha creacion" : "Creation date")</th>
            <th>@(lang == "es" ? "Acciones" : "Actions")</th>
        </tr>
    </thead>


    <tbody>


        @foreach (var cliente in Model)
    {
        <tr>
            <td><span class="id-badge">@cliente.IdCliente</span></td>
            <td><span class="patent-code">@cliente.Nombre</span></td>
            <td><span class="patent-code">@cliente.Apellido</span></td>
            <td>@cliente.DomicilioLegal</td>

            <td><span class="date-value">@cliente.FechaCreacion.ToString("dd/MM/yyyy")</span></td>

            <td>

                <div class="actions-cell">

                    <a asp-controller="AdminVentas" asp-action="EditClient" asp-route-idCliente="@cliente.IdCliente">
                            ✏️
                    </a>

                    <a asp-controller="AdminVentas" asp-action="DeleteClient" asp-route-idCliente="@cliente.IdCliente">
                            🗑️
                    </a>
                </div>


            </td>
        </tr>
    }
    </tbody>

</table>

